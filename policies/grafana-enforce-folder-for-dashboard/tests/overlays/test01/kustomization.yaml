apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
- ../../base/
- namespace.yaml
nameSuffix: -test01
namespace: vaplibtest-grafana-enforce-folder-for-dashboard-test01

patches:
- patch: |-
    apiVersion: admissionregistration.k8s.io/v1beta1
    kind: ValidatingAdmissionPolicyBinding
    metadata:
      name: vaplibtest-grafana-enforce-folder-for-dashboard
    spec:
      matchResources:
        matchPolicy: Equivalent
        namespaceSelector:
          matchLabels:
            kubernetes.io/metadata.name: vaplibtest-grafana-enforce-folder-for-dashboard-test01
- patch: |-
      apiVersion: v1
      kind: ConfigMap
      metadata:
        name: vaplibtest-grafana-enforce-folder-for-dashboard
        labels:
          grafana_dashboard: "1"
        annotations:
          grafana_folder: "vaplibtest-grafana-enforce-folder-for-dashboard-test01"